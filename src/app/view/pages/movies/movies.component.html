<section class="movies-search">
  <h2>Bem vindo</h2>

  <span
    >Busque seus filmes favoritos por palavra chave OU SELECIONE A CATEGORIA
    DESEJADA</span
  >
  <input
    type="text"
    placeholder="Procure por filmes"
    (keypress)="searchMovie($event)"
  />

  <ul class="genres-list">
    <li
      *ngFor="let genre of genres"
      (click)="searchByGenre(genre.id)"
      [ngClass]="{ activeGenre: activeGenre === genre.id }"
    >
      {{ genre?.name }}
    </li>
  </ul>

  <!-- <mat-form-field class="example-form-field" appearance="fill">
    <mat-label>Clearable input</mat-label>
    <input
      matInput
      type="text"
      (change)="handleSearchChange($event)"
      [(ngModel)]="searchValue"
    />
    <button
      *ngIf="searchValue"
      matSuffix
      mat-icon-button
      aria-label="Clear"
      (click)="resetSearch()"
    >
      <mat-icon>close</mat-icon>
    </button>
  </mat-form-field> -->
</section>

<section class="movies-featured"  *ngIf="!(isLoading$ | async)">
  <div class="movies-featured__title">
    <img src="assets/img/movie.svg" alt="" />
    <h3>{{ isSearching ? "Results" : "Now playing" }}</h3>
  </div>
  <app-movie-card-list @listState *ngIf="movies$">
    <app-movie-card
      *ngFor="let movie of movies$ | async"
      [movie]="movie"
      (click)="showMovieDetails(movie?.id)"
    ></app-movie-card>
  </app-movie-card-list>

  <mat-paginator
    [length]="listLength"
    [pageSize]="20"
    aria-label="Select page"
    (page)="handlePaginationChange($event)"
    [pageIndex]="pageIndex - 1"
    *ngIf="!activeGenre && !searchValue"
  >
  </mat-paginator>


  <div class="no-results" *ngIf="!movies$">
    Nenhum filme encontrado para a busca '{{ searchValue }}'
  </div>

  <!-- <mat-paginator [length]="length"
               [pageSize]="pageSize"
               [pageSizeOptions]="pageSizeOptions"
               (page)="pageEvent = $event"
               aria-label="Select page">
</mat-paginator> -->
</section>

<div class="loader" *ngIf="isLoading$ | async">
  <mat-spinner></mat-spinner>
</div>